<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iptables API v2.1 ‚Äî –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e0e0e0;
            line-height: 1.6;
        }
        .container { max-width: 1100px; margin: 0 auto; padding: 40px 20px; }
        header { text-align: center; margin-bottom: 50px; }
        header h1 { font-size: 42px; color: #00d9ff; margin-bottom: 10px; text-shadow: 0 0 20px rgba(0, 217, 255, 0.3); }
        header p { font-size: 18px; color: #888; }
        .version-badge {
            display: inline-block;
            background: linear-gradient(135deg, #00d9ff, #0066ff);
            color: #fff;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-top: 15px;
        }
        .changelog {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(0, 102, 255, 0.1));
            border: 1px solid rgba(0, 217, 255, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            text-align: left;
            display: inline-block;
        }
        .changelog h4 { color: #00d9ff; margin-bottom: 10px; }
        .changelog ul { list-style: none; padding-left: 0; }
        .changelog li { padding: 5px 0; color: #aaa; }
        .changelog li::before { content: "‚úì "; color: #51cf66; }
        .section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        .section h2 {
            color: #00d9ff;
            font-size: 24px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(0, 217, 255, 0.3);
        }
        .section h3 { color: #fff; font-size: 18px; margin: 25px 0 15px 0; }
        .auth-box {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 152, 0, 0.1));
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .auth-box h3 { color: #ffc107; margin-top: 0; }
        .param-table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        .param-table th, .param-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .param-table th { background: rgba(0, 217, 255, 0.1); color: #00d9ff; font-weight: 600; }
        .param-table tr:hover { background: rgba(255, 255, 255, 0.03); }
        .param-required { color: #ff6b6b; font-size: 12px; font-weight: bold; }
        .endpoint {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            border-left: 4px solid #00d9ff;
        }
        .endpoint-header { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; flex-wrap: wrap; }
        .method { display: inline-block; padding: 6px 14px; border-radius: 6px; font-weight: bold; font-size: 13px; }
        .method-get { background: #51cf66; color: #000; }
        .method-post { background: #339af0; color: #fff; }
        .endpoint-url { font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; color: #ffd43b; font-size: 14px; word-break: break-all; }
        .endpoint-desc { color: #aaa; margin-bottom: 15px; }
        pre {
            background: #0d1117;
            border-radius: 8px;
            padding: 20px;
            overflow-x: auto;
            margin: 15px 0;
            border: 1px solid #30363d;
        }
        code { font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; font-size: 13px; color: #c9d1d9; }
        .code-label {
            display: inline-block;
            background: rgba(0, 217, 255, 0.2);
            color: #00d9ff;
            padding: 3px 10px;
            border-radius: 4px;
            font-size: 12px;
            margin-bottom: 10px;
        }
        .code-label-alt {
            display: inline-block;
            background: rgba(81, 207, 102, 0.2);
            color: #51cf66;
            padding: 3px 10px;
            border-radius: 4px;
            font-size: 12px;
            margin-bottom: 10px;
        }
        .response-success { border-left: 4px solid #51cf66; }
        .response-error { border-left: 4px solid #ff6b6b; }
        .status-table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        .status-table td { padding: 10px 15px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        .status-success { color: #51cf66; font-weight: bold; }
        .status-error { color: #ff6b6b; font-weight: bold; }
        .status-warning { color: #ffc107; font-weight: bold; }
        .status-info { color: #339af0; font-weight: bold; }
        .nav {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        .nav h3 { color: #00d9ff; margin-bottom: 15px; font-size: 16px; }
        .nav ul { list-style: none; display: flex; flex-wrap: wrap; gap: 10px 20px; }
        .nav a { color: #aaa; text-decoration: none; font-size: 14px; transition: color 0.2s; }
        .nav a:hover { color: #00d9ff; }
        .tip-box {
            background: linear-gradient(135deg, rgba(81, 207, 102, 0.1), rgba(0, 128, 0, 0.1));
            border: 1px solid rgba(81, 207, 102, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .tip-box h4 { color: #51cf66; margin-bottom: 10px; }
        .warning-box {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(255, 0, 0, 0.1));
            border: 1px solid rgba(255, 107, 107, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .warning-box h4 { color: #ff6b6b; margin-bottom: 10px; }
        .new-badge {
            display: inline-block;
            background: #51cf66;
            color: #000;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
            margin-left: 8px;
            vertical-align: middle;
        }
        footer { text-align: center; padding: 40px 20px; color: #666; font-size: 14px; }
        @media (max-width: 768px) {
            header h1 { font-size: 28px; }
            .endpoint-header { flex-direction: column; align-items: flex-start; }
            .param-table { font-size: 14px; }
            pre { padding: 15px; font-size: 12px; }
            .nav ul { flex-direction: column; gap: 8px; }
            .changelog { display: block; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üî• iptables API</h1>
            <p>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π IP-–∞–¥—Ä–µ—Å–æ–≤</p>
            <span class="version-badge">–í–µ—Ä—Å–∏—è 2.1</span>
            <div class="changelog">
                <h4>üÜï –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ v2.1:</h4>
                <ul>
                    <li>–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ POST-–∑–∞–ø—Ä–æ—Å–æ–≤ (–ø–∞—Ä–∞–º–µ—Ç—Ä <code>api</code> –≤ —Ç–µ–ª–µ)</li>
                    <li>–ß–∏—Ç–∞–µ–º–∞—è –∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –≤ JSON-–æ—Ç–≤–µ—Ç–∞—Ö</li>
                    <li>–û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API</li>
                </ul>
            </div>
        </header>
        
        <nav class="nav">
            <h3>üìë –ù–∞–≤–∏–≥–∞—Ü–∏—è</h3>
            <ul>
                <li><a href="#auth">üîë –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</a></li>
                <li><a href="#block">üö´ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP</a></li>
                <li><a href="#unblock">‚úÖ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP</a></li>
                <li><a href="#list">üìã –°–ø–∏—Å–æ–∫ IPv4</a></li>
                <li><a href="#list6">üìã –°–ø–∏—Å–æ–∫ IPv6</a></li>
                <li><a href="#clear">üóëÔ∏è –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∞–≤–∏–ª</a></li>
                <li><a href="#debug">üîß –û—Ç–ª–∞–¥–∫–∞</a></li>
                <li><a href="#statuses">üìä –°—Ç–∞—Ç—É—Å—ã –æ—Ç–≤–µ—Ç–æ–≤</a></li>
                <li><a href="#examples">üí° –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</a></li>
            </ul>
        </nav>
        
        <!-- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è -->
        <section id="auth" class="section">
            <h2>üîë –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
            <div class="auth-box">
                <h3>‚ö†Ô∏è –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
                <p>–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API —Ç—Ä–µ–±—É—é—Ç —Å–ª–µ–¥—É—é—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:</p>
                <table class="param-table">
                    <tr><th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                    <tr><td><code>api</code></td><td><code>1</code></td><td>–í–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º API (–æ—Ç–≤–µ—Ç –≤ JSON)</td></tr>
                    <tr><td><code>api_key</code></td><td><code>YOUR_KEY</code></td><td>–ö–ª—é—á –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–∑ settings.php</td></tr>
                </table>
            </div>
            <p>API –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–µ—Ä–µ–∑ <span class="method method-get">GET</span> –∏ <span class="method method-post">POST</span> (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è <code>$_REQUEST</code>).</p>
            <div class="tip-box">
                <h4>üí° –î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ POST-–∑–∞–ø—Ä–æ—Å–æ–≤ <span class="new-badge">v2.1</span></h4>
                <p>–ù–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 2.1, –ø–∞—Ä–∞–º–µ—Ç—Ä <code>api=1</code> –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å:</p>
                <ul style="margin-top: 10px; margin-left: 20px;">
                    <li><strong>–í URL:</strong> <code>iptables.php?api=1</code> + POST-–¥–∞–Ω–Ω—ã–µ</li>
                    <li><strong>–í —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞:</strong> <code>action=block&amp;ip=...&amp;api=1&amp;api_key=...</code></li>
                </ul>
            </div>
        </section>
        
        <!-- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP -->
        <section id="block" class="section">
            <h2>üö´ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP</h2>
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method method-get">GET</span>
                    <span class="method method-post">POST</span>
                    <span class="endpoint-url">?action=block&amp;ip={IP}&amp;api=1&amp;api_key={KEY}</span>
                </div>
                <p class="endpoint-desc">–ë–ª–æ–∫–∏—Ä—É–µ—Ç IP-–∞–¥—Ä–µ—Å –¥–ª—è –ø–æ—Ä—Ç–æ–≤ 80 –∏ 443. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç IPv4 –∏ IPv6.</p>
                <table class="param-table">
                    <tr><th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th><th>–¢–∏–ø</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                    <tr><td><code>action</code></td><td><span class="param-required">–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π</span></td><td>–ó–Ω–∞—á–µ–Ω–∏–µ: <code>block</code></td></tr>
                    <tr><td><code>ip</code></td><td><span class="param-required">–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π</span></td><td>IP-–∞–¥—Ä–µ—Å –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (IPv4 –∏–ª–∏ IPv6)</td></tr>
                </table>
            </div>
            <h3>–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤</h3>
            <span class="code-label">curl GET</span>
            <pre><code>curl "https://your-server/iptables-API/iptables.php?action=block&amp;ip=192.168.1.100&amp;api=1&amp;api_key=YOUR_KEY"</code></pre>
            <span class="code-label">curl POST (api –≤ URL)</span>
            <pre><code>curl -X POST "https://your-server/iptables-API/iptables.php?api=1" \
  -d "action=block&amp;ip=192.168.1.100&amp;api_key=YOUR_KEY"</code></pre>
            <span class="code-label-alt">curl POST (api –≤ —Ç–µ–ª–µ) ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è</span> <span class="new-badge">v2.1</span>
            <pre><code>curl -X POST "https://your-server/iptables-API/iptables.php" \
  -d "action=block&amp;ip=192.168.1.100&amp;api=1&amp;api_key=YOUR_KEY"</code></pre>
            <span class="code-label">curl POST (IPv6)</span>
            <pre><code>curl -X POST "https://your-server/iptables-API/iptables.php" \
  -d "action=block&amp;ip=2001:db8::1&amp;api=1&amp;api_key=YOUR_KEY"</code></pre>
            <h3>–û—Ç–≤–µ—Ç—ã</h3>
            <span class="code-label">‚úÖ –£—Å–ø–µ—Ö</span>
            <pre class="response-success"><code>{
    "status": "success",
    "message": "IP 192.168.1.100 —É—Å–ø–µ—à–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –¥–ª—è –ø–æ—Ä—Ç–æ–≤ 80 –∏ 443",
    "details": "–ü–æ—Ä—Ç 80: –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –ü–æ—Ä—Ç 443: –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"
}</code></pre>
            <span class="code-label">‚ö†Ô∏è –£–∂–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</span>
            <pre><code>{
    "status": "success",
    "message": "IP 192.168.1.100 —É—Å–ø–µ—à–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –¥–ª—è –ø–æ—Ä—Ç–æ–≤ 80 –∏ 443",
    "details": "–ü–æ—Ä—Ç 80: —É–∂–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –ü–æ—Ä—Ç 443: —É–∂–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"
}</code></pre>
            <span class="code-label">‚ùå –û—à–∏–±–∫–∞</span>
            <pre class="response-error"><code>{
    "status": "error",
    "message": "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç IP: abc123"
}</code></pre>
        </section>
        
        <!-- –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP -->
        <section id="unblock" class="section">
            <h2>‚úÖ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP</h2>
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method method-get">GET</span>
                    <span class="method method-post">POST</span>
                    <span class="endpoint-url">?action=unblock&amp;ip={IP}&amp;api=1&amp;api_key={KEY}</span>
                </div>
                <p class="endpoint-desc">–†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–Ω–µ–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π IP-–∞–¥—Ä–µ—Å.</p>
                <table class="param-table">
                    <tr><th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th><th>–¢–∏–ø</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                    <tr><td><code>action</code></td><td><span class="param-required">–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π</span></td><td>–ó–Ω–∞—á–µ–Ω–∏–µ: <code>unblock</code></td></tr>
                    <tr><td><code>ip</code></td><td><span class="param-required">–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π</span></td><td>IP-–∞–¥—Ä–µ—Å –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (IPv4 –∏–ª–∏ IPv6)</td></tr>
                </table>
            </div>
            <h3>–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤</h3>
            <span class="code-label">curl GET</span>
            <pre><code>curl "https://your-server/iptables-API/iptables.php?action=unblock&amp;ip=192.168.1.100&amp;api=1&amp;api_key=YOUR_KEY"</code></pre>
            <span class="code-label-alt">curl POST (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</span>
            <pre><code>curl -X POST "https://your-server/iptables-API/iptables.php" \
  -d "action=unblock&amp;ip=192.168.1.100&amp;api=1&amp;api_key=YOUR_KEY"</code></pre>
            <h3>–û—Ç–≤–µ—Ç—ã</h3>
            <span class="code-label">‚úÖ –£—Å–ø–µ—Ö</span>
            <pre class="response-success"><code>{
    "status": "success",
    "message": "IP 192.168.1.100 —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω",
    "details": "–ü–æ—Ä—Ç 80: —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –ü–æ—Ä—Ç 443: —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"
}</code></pre>
            <span class="code-label">‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞</span>
            <pre><code>{
    "status": "warning",
    "message": "–ß–∞—Å—Ç–∏—á–Ω–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP: 192.168.1.100",
    "details": "–ü–æ—Ä—Ç 80: —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –ü–æ—Ä—Ç 443: –æ—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏"
}</code></pre>
        </section>
        
        <!-- –°–ø–∏—Å–æ–∫ IPv4 -->
        <section id="list" class="section">
            <h2>üìã –°–ø–∏—Å–æ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö IPv4</h2>
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method method-get">GET</span>
                    <span class="method method-post">POST</span>
                    <span class="endpoint-url">?action=list&amp;api=1&amp;api_key={KEY}</span>
                </div>
                <p class="endpoint-desc">–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö IPv4 –∞–¥—Ä–µ—Å–æ–≤ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ—Ä—Ç–∞—Ö.</p>
                <table class="param-table">
                    <tr><th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th><th>–¢–∏–ø</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                    <tr><td><code>action</code></td><td><span class="param-required">–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π</span></td><td>–ó–Ω–∞—á–µ–Ω–∏–µ: <code>list</code></td></tr>
                </table>
            </div>
            <h3>–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤</h3>
            <span class="code-label">curl GET</span>
            <pre><code>curl "https://your-server/iptables-API/iptables.php?action=list&amp;api=1&amp;api_key=YOUR_KEY"</code></pre>
            <span class="code-label-alt">curl POST</span>
            <pre><code>curl -X POST "https://your-server/iptables-API/iptables.php" \
  -d "action=list&amp;api=1&amp;api_key=YOUR_KEY"</code></pre>
            <h3>–û—Ç–≤–µ—Ç</h3>
            <pre class="response-success"><code>{
    "status": "success",
    "version": "IPv4",
    "count": 2,
    "blocked_ips": [
        "192.168.1.100",
        "10.0.0.50"
    ],
    "blocked_details": [
        { "ip": "192.168.1.100", "ports": ["80", "443"] },
        { "ip": "10.0.0.50", "ports": ["80", "443"] }
    ]
}</code></pre>
        </section>
        
        <!-- –°–ø–∏—Å–æ–∫ IPv6 -->
        <section id="list6" class="section">
            <h2>üìã –°–ø–∏—Å–æ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö IPv6</h2>
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method method-get">GET</span>
                    <span class="method method-post">POST</span>
                    <span class="endpoint-url">?action=list6&amp;api=1&amp;api_key={KEY}</span>
                </div>
                <p class="endpoint-desc">–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö IPv6 –∞–¥—Ä–µ—Å–æ–≤.</p>
                <table class="param-table">
                    <tr><th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th><th>–¢–∏–ø</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                    <tr><td><code>action</code></td><td><span class="param-required">–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π</span></td><td>–ó–Ω–∞—á–µ–Ω–∏–µ: <code>list6</code></td></tr>
                </table>
            </div>
            <h3>–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤</h3>
            <span class="code-label">curl GET</span>
            <pre><code>curl "https://your-server/iptables-API/iptables.php?action=list6&amp;api=1&amp;api_key=YOUR_KEY"</code></pre>
            <span class="code-label-alt">curl POST</span>
            <pre><code>curl -X POST "https://your-server/iptables-API/iptables.php" \
  -d "action=list6&amp;api=1&amp;api_key=YOUR_KEY"</code></pre>
            <h3>–û—Ç–≤–µ—Ç</h3>
            <pre class="response-success"><code>{
    "status": "success",
    "version": "IPv6",
    "count": 1,
    "blocked_ips": [ "2001:db8::1" ],
    "blocked_details": [
        { "ip": "2001:db8::1", "ports": ["80", "443"] }
    ]
}</code></pre>
        </section>
        
        <!-- –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∞–≤–∏–ª -->
        <section id="clear" class="section">
            <h2>üóëÔ∏è –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª</h2>
            <div class="warning-box">
                <h4>‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ!</h4>
                <p>–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —É–¥–∞–ª–∏—Ç <strong>–í–°–ï</strong> –ø—Ä–∞–≤–∏–ª–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è IPv4 –∏ IPv6. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é!</p>
            </div>
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method method-get">GET</span>
                    <span class="method method-post">POST</span>
                    <span class="endpoint-url">?action=clear&amp;api=1&amp;api_key={KEY}</span>
                </div>
                <p class="endpoint-desc">–£–¥–∞–ª—è–µ—Ç –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ IP –¥–ª—è –ø–æ—Ä—Ç–æ–≤ 80 –∏ 443.</p>
                <table class="param-table">
                    <tr><th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th><th>–¢–∏–ø</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                    <tr><td><code>action</code></td><td><span class="param-required">–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π</span></td><td>–ó–Ω–∞—á–µ–Ω–∏–µ: <code>clear</code></td></tr>
                </table>
            </div>
            <h3>–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤</h3>
            <span class="code-label">curl GET</span>
            <pre><code>curl "https://your-server/iptables-API/iptables.php?action=clear&amp;api=1&amp;api_key=YOUR_KEY"</code></pre>
            <span class="code-label-alt">curl POST</span>
            <pre><code>curl -X POST "https://your-server/iptables-API/iptables.php" \
  -d "action=clear&amp;api=1&amp;api_key=YOUR_KEY"</code></pre>
            <h3>–û—Ç–≤–µ—Ç—ã</h3>
            <span class="code-label">‚úÖ –£—Å–ø–µ—Ö</span>
            <pre class="response-success"><code>{
    "status": "success",
    "message": "–í—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã",
    "details": "IPv4 192.168.1.100 —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, IPv4 10.0.0.50 —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"
}</code></pre>
            <span class="code-label">‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω—ã–π —É—Å–ø–µ—Ö</span>
            <pre><code>{
    "status": "warning",
    "message": "–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å",
    "details": "IPv4 192.168.1.100 —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω, –û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ IPv4: 10.0.0.50"
}</code></pre>
        </section>
        
        <!-- –û—Ç–ª–∞–¥–∫–∞ -->
        <section id="debug" class="section">
            <h2>üîß –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method method-get">GET</span>
                    <span class="method method-post">POST</span>
                    <span class="endpoint-url">?action=debug&amp;api=1&amp;api_key={KEY}</span>
                </div>
                <p class="endpoint-desc">–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—É—é –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–∞–≤–∏–ª–∞—Ö iptables –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞.</p>
                <table class="param-table">
                    <tr><th>–ü–∞—Ä–∞–º–µ—Ç—Ä</th><th>–¢–∏–ø</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
                    <tr><td><code>action</code></td><td><span class="param-required">–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π</span></td><td>–ó–Ω–∞—á–µ–Ω–∏–µ: <code>debug</code></td></tr>
                </table>
            </div>
            <h3>–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤</h3>
            <span class="code-label">curl GET</span>
            <pre><code>curl "https://your-server/iptables-API/iptables.php?action=debug&amp;api=1&amp;api_key=YOUR_KEY"</code></pre>
            <span class="code-label-alt">curl POST</span>
            <pre><code>curl -X POST "https://your-server/iptables-API/iptables.php" \
  -d "action=debug&amp;api=1&amp;api_key=YOUR_KEY"</code></pre>
            <h3>–û—Ç–≤–µ—Ç</h3>
            <pre class="response-success"><code>{
    "status": "success",
    "debug_info": {
        "iptables_ipv4": "Chain INPUT (policy ACCEPT)...",
        "iptables_ipv6": "Chain INPUT (policy ACCEPT)...",
        "server_load": 0.45,
        "blocked_ipv4": { "status": "success", "version": "IPv4", "count": 2, ... },
        "blocked_ipv6": { "status": "success", "version": "IPv6", "count": 0, ... }
    }
}</code></pre>
        </section>
        
        <!-- –°—Ç–∞—Ç—É—Å—ã –æ—Ç–≤–µ—Ç–æ–≤ -->
        <section id="statuses" class="section">
            <h2>üìä –°—Ç–∞—Ç—É—Å—ã –æ—Ç–≤–µ—Ç–æ–≤</h2>
            <table class="status-table">
                <tr><td><span class="status-success">success</span></td><td>–û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ</td></tr>
                <tr><td><span class="status-error">error</span></td><td>–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–Ω–µ–≤–µ—Ä–Ω—ã–π IP, –æ—à–∏–±–∫–∞ iptables)</td></tr>
                <tr><td><span class="status-warning">warning</span></td><td>–ß–∞—Å—Ç–∏—á–Ω—ã–π —É—Å–ø–µ—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ä—Ç)</td></tr>
                <tr><td><span class="status-info">info</span></td><td>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (IP —É–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è)</td></tr>
            </table>
            <h3>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞</h3>
            <pre><code>{
    "status": "success|error|warning|info",
    "message": "–û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏",
    "details": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
}</code></pre>
            <div class="tip-box">
                <h4>üí° –ö–∏—Ä–∏–ª–ª–∏—Ü–∞ –≤ –æ—Ç–≤–µ—Ç–∞—Ö <span class="new-badge">v2.1</span></h4>
                <p>–ù–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 2.1, JSON-–æ—Ç–≤–µ—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç —á–∏—Ç–∞–µ–º—É—é –∫–∏—Ä–∏–ª–ª–∏—Ü—É (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è <code>JSON_UNESCAPED_UNICODE</code>).</p>
            </div>
        </section>
        
        <!-- –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ -->
        <section id="examples" class="section">
            <h2>üí° –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</h2>
            
            <h3>PHP (file_get_contents) <span class="new-badge">POST –≤ —Ç–µ–ª–µ</span></h3>
            <pre><code>&lt;?php
$url = "http://127.0.0.1/iptables-API/iptables.php";
$data = http_build_query([
    'action'  =&gt; 'block',
    'ip'      =&gt; '192.168.1.100',
    'api'     =&gt; 1,
    'api_key' =&gt; 'YOUR_KEY'
]);

$options = [
    'http' =&gt; [
        'method'  =&gt; 'POST',
        'header'  =&gt; 'Content-Type: application/x-www-form-urlencoded',
        'content' =&gt; $data,
        'timeout' =&gt; 5
    ]
];

$context = stream_context_create($options);
$response = file_get_contents($url, false, $context);
$result = json_decode($response, true);

if ($result['status'] === 'success') {
    echo "IP –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: " . $result['message'];
}
?&gt;</code></pre>
            
            <h3>PHP (cURL)</h3>
            <pre><code>&lt;?php
function blockIP($ip) {
    $ch = curl_init("http://127.0.0.1/iptables-API/iptables.php");
    curl_setopt_array($ch, [
        CURLOPT_POST           =&gt; true,
        CURLOPT_RETURNTRANSFER =&gt; true,
        CURLOPT_TIMEOUT        =&gt; 5,
        CURLOPT_POSTFIELDS     =&gt; http_build_query([
            'action'  =&gt; 'block',
            'ip'      =&gt; $ip,
            'api'     =&gt; 1,
            'api_key' =&gt; 'YOUR_KEY'
        ])
    ]);
    
    $response = curl_exec($ch);
    $error = curl_error($ch);
    curl_close($ch);
    
    if ($error) {
        return ['status' =&gt; 'error', 'message' =&gt; $error];
    }
    
    return json_decode($response, true);
}

function unblockIP($ip) {
    $ch = curl_init("http://127.0.0.1/iptables-API/iptables.php");
    curl_setopt_array($ch, [
        CURLOPT_POST           =&gt; true,
        CURLOPT_RETURNTRANSFER =&gt; true,
        CURLOPT_TIMEOUT        =&gt; 5,
        CURLOPT_POSTFIELDS     =&gt; http_build_query([
            'action'  =&gt; 'unblock',
            'ip'      =&gt; $ip,
            'api'     =&gt; 1,
            'api_key' =&gt; 'YOUR_KEY'
        ])
    ]);
    
    $response = curl_exec($ch);
    curl_close($ch);
    
    return json_decode($response, true);
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
$result = blockIP('1.2.3.4');
echo $result['message'];
?&gt;</code></pre>
            
            <h3>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MurKir Security</h3>
            <pre><code>&lt;?php
// –í —Ñ—É–Ω–∫—Ü–∏–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ MurKir Security
function blockViaIptables($ip) {
    $url = "http://127.0.0.1/iptables-API/iptables.php";
    $data = http_build_query([
        'action'  =&gt; 'block',
        'ip'      =&gt; $ip,
        'api'     =&gt; 1,
        'api_key' =&gt; 'YOUR_KEY'
    ]);
    
    // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–Ω–µ –∂–¥–µ–º –æ—Ç–≤–µ—Ç–∞)
    $fp = @fsockopen('127.0.0.1', 80, $errno, $errstr, 1);
    if ($fp) {
        $request = "POST /iptables-API/iptables.php HTTP/1.1\r\n";
        $request .= "Host: 127.0.0.1\r\n";
        $request .= "Content-Type: application/x-www-form-urlencoded\r\n";
        $request .= "Content-Length: " . strlen($data) . "\r\n";
        $request .= "Connection: Close\r\n\r\n";
        $request .= $data;
        fwrite($fp, $request);
        fclose($fp);
    }
}
?&gt;</code></pre>
            
            <h3>Bash —Å–∫—Ä–∏–ø—Ç</h3>
            <pre><code>#!/bin/bash

API_URL="https://your-server/iptables-API/iptables.php"
API_KEY="YOUR_KEY"

# –§—É–Ω–∫—Ü–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (POST –≤ —Ç–µ–ª–µ)
block_ip() {
    curl -s -X POST "$API_URL" \
        -d "action=block&amp;ip=$1&amp;api=1&amp;api_key=$API_KEY"
}

# –§—É–Ω–∫—Ü–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
unblock_ip() {
    curl -s -X POST "$API_URL" \
        -d "action=unblock&amp;ip=$1&amp;api=1&amp;api_key=$API_KEY"
}

# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
list_blocked() {
    curl -s -X POST "$API_URL" \
        -d "action=list&amp;api=1&amp;api_key=$API_KEY" | jq .
}

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
block_ip "192.168.1.100"
echo ""
list_blocked</code></pre>
            
            <h3>Python</h3>
            <pre><code>import requests

API_URL = "http://127.0.0.1/iptables-API/iptables.php"
API_KEY = "YOUR_KEY"

def block_ip(ip):
    response = requests.post(API_URL, data={
        'action': 'block',
        'ip': ip,
        'api': 1,
        'api_key': API_KEY
    }, timeout=5)
    return response.json()

def unblock_ip(ip):
    response = requests.post(API_URL, data={
        'action': 'unblock',
        'ip': ip,
        'api': 1,
        'api_key': API_KEY
    }, timeout=5)
    return response.json()

def list_blocked(version=4):
    action = 'list6' if version == 6 else 'list'
    response = requests.post(API_URL, data={
        'action': action,
        'api': 1,
        'api_key': API_KEY
    }, timeout=5)
    return response.json()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
result = block_ip('192.168.1.100')
print(result['message'])

blocked = list_blocked()
print(f"–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ IPv4: {blocked['count']}")</code></pre>
        </section>
        
        <footer>
            <p>iptables API v2.1 | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è MurKir Security</p>
        </footer>
    </div>
</body>
</html>
