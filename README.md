<img src="./images/Screenshot 2025-07-10 163228.png" alt="–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è" width="800">
 
 # Redis MurKir Security v2.0 - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

## üõ°Ô∏è –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?

**Redis MurKir Security v2.0** - —ç—Ç–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã –≤–µ–±-—Å–∞–π—Ç–æ–≤ –æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–æ—Ç–æ–≤, —Å–∫—Ä–µ–ø–µ—Ä–æ–≤ –∏ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –∞–Ω–∞–ª–∏–∑–∏—Ä—É—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π –∏ –±–ª–æ–∫–∏—Ä—É—è –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.

## üéØ –û—Ç –∫–æ–≥–æ –∑–∞—â–∏—â–∞–µ—Ç?

### ‚úÖ **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç:**

**1. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–æ—Ç—ã:**
- cURL, wget, Python requests
- Selenium WebDriver, Puppeteer
- Headless –±—Ä–∞—É–∑–µ—Ä—ã (Chrome --headless)
- –°–∫—Ä–∏–ø—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ —Å–∫—Ä–µ–π–ø–∏–Ω–≥–∞

**2. –í—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫:**
- DDoS –∞—Ç–∞–∫–∏ –º–∞–ª–æ–π –∏ —Å—Ä–µ–¥–Ω–µ–π –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏
- –ë—Ä—É—Ç—Ñ–æ—Ä—Å –∞—Ç–∞–∫–∏ –Ω–∞ —Ñ–æ—Ä–º—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∞–º
- –ù–∞–∫—Ä—É—Ç–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤

**3. –ù–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫–∞–Ω–µ—Ä—ã:**
- –°–∫–∞–Ω–µ—Ä—ã —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- SEO-–±–æ—Ç—ã (–∫—Ä–æ–º–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö)
- –ö–æ–Ω—Ç–µ–Ω—Ç-–ø–∞—Ä—Å–µ—Ä—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∏ —Ü–µ–Ω

**4. –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –°–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è (>50-200 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω)
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ User-Agent —Å –æ–¥–Ω–æ–≥–æ IP

### ‚ùå **–ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç (–±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç):**

**1. –õ–µ–≥–∏—Ç–∏–º–Ω—ã–µ –ø–æ–∏—Å–∫–æ–≤—ã–µ –±–æ—Ç—ã:**
- Googlebot, Bingbot, Yandexbot
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ rDNS + User-Agent
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ whitelisting

**2. –û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**
- –ù–∞—Å—Ç–æ—è—â–∏–µ –±—Ä–∞—É–∑–µ—Ä—ã (Chrome, Firefox, Safari)
- –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –Ω–∞ –æ–¥–Ω–æ–º IP

**3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–∏—Å—ã:**
- Uptime Robot, Pingdom, StatusCake
- CDN —Å–µ—Ä–≤–∏—Å—ã (Cloudflare, Fastly)
- –ê—Ä—Ö–∏–≤—ã (Archive.org)

## üîß –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞?

### **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞:**

**1. –£—Ä–æ–≤–µ–Ω—å IP –∞–Ω–∞–ª–∏–∑–∞:**
```
–ü–æ—Å–µ—Ç–∏—Ç–µ–ª—å ‚Üí –ê–Ω–∞–ª–∏–∑ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ ‚Üí –†–µ—à–µ–Ω–∏–µ
```

**2. –£—Ä–æ–≤–µ–Ω—å —Ö–µ—à-–∞–Ω–∞–ª–∏–∑–∞ (v2.0):**
```
–ë—Ä–∞—É–∑–µ—Ä–Ω—ã–π –æ—Ç–ø–µ—á–∞—Ç–æ–∫ ‚Üí –£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ö–µ—à ‚Üí –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è ‚Üí –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞
```

**3. –£—Ä–æ–≤–µ–Ω—å —Å–µ—Å—Å–∏–π/cookies:**
```
Cookie –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚Üí –°–µ—Å—Å–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚Üí –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ ‚Üí –†–µ—à–µ–Ω–∏–µ
```

### **–ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π:**

```
1. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã ‚Üí –ü–†–û–ü–£–°–ö
2. –ü–æ–∏—Å–∫–æ–≤—ã–µ –±–æ—Ç—ã ‚Üí –ü–†–û–í–ï–†–ö–ê rDNS ‚Üí –ü–†–û–ü–£–°–ö/–ë–õ–û–ö
3. –•–µ—à –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω? ‚Üí –ë–õ–û–ö
4. IP/–°–µ—Å—Å–∏—è/Cookie –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã? ‚Üí –ë–õ–û–ö
5. –í–∞–ª–∏–¥–Ω—ã–π cookie? ‚Üí –ê–ù–ê–õ–ò–ó –ü–û–í–ï–î–ï–ù–ò–Ø ‚Üí –†–ï–®–ï–ù–ò–ï
6. –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –°–û–ó–î–ê–ù–ò–ï COOKIE ‚Üí –ü–†–û–ü–£–°–ö
```

### **–ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –≤–∫–ª—é—á–∞–µ—Ç:**

- **–°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤** (–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É)
- **–†–µ–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤** (–±–æ—Ç-–ø–∞—Ç—Ç–µ—Ä–Ω—ã)
- **–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü** (–º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏—è)
- **HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏** (–ø–æ–ª–Ω–æ—Ç–∞ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å)
- **User-Agent –∞–Ω–∞–ª–∏–∑** (–ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã)
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤** –Ω–∞ IP

## üîå –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∞—Ç—å?

### **1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã:**

**PHP –≤–µ—Ä—Å–∏–∏:**
- ‚úÖ **PHP 7.4+** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- ‚úÖ **PHP 8.0+** (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)
- ‚úÖ **PHP 8.1, 8.2, 8.3** (–ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞)
- ‚ùå PHP 7.3 –∏ –Ω–∏–∂–µ (–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- **Redis 4.0+** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- **php-redis —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- **Sessions –ø–æ–¥–¥–µ—Ä–∂–∫–∞** (–≤–∫–ª—é—á–µ–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:**
```php
<?php
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
echo "PHP –≤–µ—Ä—Å–∏—è: " . PHP_VERSION . "\n";
echo "Redis —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ: " . (extension_loaded('redis') ? '–î–ê' : '–ù–ï–¢') . "\n";
echo "Sessions: " . (function_exists('session_start') ? '–î–ê' : '–ù–ï–¢') . "\n";
?>
```

### **2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Redis:**

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install redis-server php-redis
sudo systemctl start redis
sudo systemctl enable redis
```

**CentOS/RHEL:**
```bash
sudo yum install redis php-redis
sudo systemctl start redis
sudo systemctl enable redis
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ Redis:**
```bash
redis-cli ping
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: PONG
```

### **3. –ë–∞–∑–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**

**–°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª—ã:**
```
/your-site/bot_protection/
‚îú‚îÄ‚îÄ inline_check.php          # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∑–∞—â–∏—Ç—ã
‚îú‚îÄ‚îÄ redis-admin.php           # –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞  
‚îú‚îÄ‚îÄ redis_test.php            # –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îî‚îÄ‚îÄ README.txt                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–π PHP —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**
```php
<?php
// –í —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –¥–æ –ª—é–±–æ–≥–æ –≤—ã–≤–æ–¥–∞
require_once '/path/to/bot_protection/inline_check.php';

try {
    $protection = new RedisBotProtectionWithSessions(
        '127.0.0.1',    // Redis host
        6379,           // Redis port  
        null,           // Redis password (–µ—Å–ª–∏ –µ—Å—Ç—å)
        0               // Redis database (–æ–±—ã—á–Ω–æ 0)
    );
    
    $protection->protect();
    
} catch (Exception $e) {
    error_log("Bot protection error: " . $e->getMessage());
    // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É –±–µ–∑ –∑–∞—â–∏—Ç—ã –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
}

// –í–∞—à –æ–±—ã—á–Ω—ã–π –∫–æ–¥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
?>
<!DOCTYPE html>
<html>
...
```

### **4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**

**–ß–µ—Ä–µ–∑ .htaccess (–ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±):**
```apache
# –î–æ–±–∞–≤—å—Ç–µ –≤ .htaccess
php_value auto_prepend_file "/full/path/to/bot_protection/inline_check.php"
```

**–ß–µ—Ä–µ–∑ PHP-FPM pool (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è VPS/–≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤):**
```ini
# –î–æ–±–∞–≤—å—Ç–µ –≤ /etc/php/7.4/fpm/pool.d/your-site.conf
# –∏–ª–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π pool –∫–æ–Ω—Ñ–∏–≥

; –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç –±–æ—Ç–æ–≤ —Å —Å–µ—Å—Å–∏—è–º–∏
php_admin_value[auto_prepend_file] = "/home/user/site/bot_protection/inline_check.php"

# –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ PHP-FPM:
# sudo systemctl reload php7.4-fpm
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ PHP-FPM –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ (–±—ã—Å—Ç—Ä–µ–µ)
- ‚úÖ –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç .htaccess
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞–º–∏ (Nginx + PHP-FPM)
- ‚úÖ –ë–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ (—Å–∏—Å—Ç–µ–º–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)

**–ß–µ—Ä–µ–∑ php.ini (–≥–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Å–∞–π—Ç–æ–≤):**
```ini
; –î–æ–±–∞–≤—å—Ç–µ –≤ php.ini (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ - –¥–ª—è –≤—Å–µ—Ö —Å–∞–π—Ç–æ–≤!)
auto_prepend_file = "/full/path/to/bot_protection/inline_check.php"
```

**–ß–µ—Ä–µ–∑ WordPress (functions.php):**
```php
// –î–æ–±–∞–≤—å—Ç–µ –≤ functions.php —Ç–µ–º—ã
add_action('init', function() {
    if (!is_admin()) {
        require_once '/path/to/bot_protection/inline_check.php';
        
        try {
            $protection = new RedisBotProtectionWithSessions();
            $protection->protect();
        } catch (Exception $e) {
            error_log("Bot protection error: " . $e->getMessage());
        }
    }
});
```

**–ß–µ—Ä–µ–∑ Nginx + PHP-FPM (—Å–µ—Ä–≤–µ—Ä–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å):**
```nginx
# –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx location –±–ª–æ–∫–∞
location ~ \.php$ {
    fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;
    fastcgi_param PHP_VALUE "auto_prepend_file=/home/user/site/bot_protection/inline_check.php";
    # –æ—Å—Ç–∞–ª—å–Ω—ã–µ fastcgi –ø–∞—Ä–∞–º–µ—Ç—Ä—ã...
}
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

**1. –°–º–µ–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á:**
```php
private $secretKey = '–≤–∞—à_—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_–∫–ª—é—á_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞_2025';
```

**2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
```php
$protection = new RedisBotProtectionWithSessions(
    'localhost',        // –∏–ª–∏ IP –≤–∞—à–µ–≥–æ Redis —Å–µ—Ä–≤–µ—Ä–∞
    6379,              // –ø–æ—Ä—Ç Redis  
    'password',        // –ø–∞—Ä–æ–ª—å Redis (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
    0                  // –Ω–æ–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
);
```

### **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

**–ú—è–≥–∫–∏–π —Ä–µ–∂–∏–º (–¥–ª—è —Å–∞–π—Ç–æ–≤ —Å –≤—ã—Å–æ–∫–∏–º —Ç—Ä–∞—Ñ–∏–∫–æ–º):**
```php
// –í analyzeUserHashBehavior() –∏–∑–º–µ–Ω–∏—Ç–µ:
$blockThreshold = $isMobile ? 40 : 30;  // –≤–º–µ—Å—Ç–æ 25:12

// –í ttlSettings –∏–∑–º–µ–Ω–∏—Ç–µ:
'ip_blocked' => 600,                    // 10 –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ 30
'user_hash_blocked' => 1800,            // 30 –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ 2 —á–∞—Å–æ–≤
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### **–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:**
```
https://your-site.com/bot_protection/redis-admin.php
```
**–§—É–Ω–∫—Ü–∏–∏:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö IP/—Ö–µ—à–µ–π
- –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### **–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:**
```
https://your-site.com/bot_protection/redis_test.php  
```
**–§—É–Ω–∫—Ü–∏–∏:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∑–∞—â–∏—Ç—ã
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- Debug –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f /var/log/apache2/error.log | grep "blocked"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Redis
redis-cli keys "bot_protection:*" | wc -l
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### **–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:**

**1. "Redis connection failed"**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Redis
sudo systemctl status redis
redis-cli ping

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ PHP —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
php -m | grep redis
```

**2. "–ë–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –æ–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"**
```php
// –£–≤–µ–ª–∏—á—å—Ç–µ –ø–æ—Ä–æ–≥–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
$blockThreshold = $isMobile ? 40 : 30;
'ip_blocked' => 300,  // 5 –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ 30
```

**3. "–ë–æ—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –∑–∞—â–∏—Ç—É"**
```php
// –£–º–µ–Ω—å—à–∏—Ç–µ –ø–æ—Ä–æ–≥–∏
$blockThreshold = $isMobile ? 15 : 10;
if ($trackingData['requests'] < 3) // –≤–º–µ—Å—Ç–æ 5
```

**4. "–ú–æ–±–∏–ª—å–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –±–ª–æ–∫–∏—Ä—É—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞"**
```php
// ‚úÖ –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ v2.0!
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è lastOctet IP –¥–ª—è —Ä–∞–∑–ª–∏—á–∏—è –±—Ä–∞—É–∑–µ—Ä–æ–≤
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### **–°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ:**
- 1 CPU —è–¥—Ä–æ
- 512 MB RAM  
- 100 MB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- Redis 50 MB RAM

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ:**
- 2+ CPU —è–¥—Ä–∞
- 2+ GB RAM
- 1 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞  
- Redis 200+ MB RAM

### **–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º—É:**

**–ü—Ä–∏ 1000 –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π/—á–∞—Å:**
- Redis –ø–∞–º—è—Ç—å: ~50-100 MB
- PHP –ø–∞–º—è—Ç—å: +5-10 MB –Ω–∞ –∑–∞–ø—Ä–æ—Å
- CPU –Ω–∞–≥—Ä—É–∑–∫–∞: +5-15%
- –ó–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–≤–µ—Ç–∞: +5-50 –º—Å

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
- –í–∫–ª—é—á–∏—Ç–µ Redis persistence
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ TTL –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º—è–≥–∫–∏–µ —Ä–µ–∂–∏–º—ã –¥–ª—è –≤—ã—Å–æ–∫–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞

## üõ†Ô∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ CMS

### **WordPress:**
```php
// functions.php
add_action('template_redirect', function() {
    require_once '/path/to/inline_check.php';
    $protection = new RedisBotProtectionWithSessions();
    $protection->protect();
});
```

### **Laravel:**
```php
// Middleware
php artisan make:middleware BotProtection

// –í BotProtection.php
public function handle($request, Closure $next) {
    require_once '/path/to/inline_check.php';
    $protection = new RedisBotProtectionWithSessions();
    $protection->protect();
    return $next($request);
}
```

### **Drupal:**
```php
// settings.php
$settings['container_yamls'][] = '/path/to/bot_protection_services.yml';
// –ò–ª–∏ —á–µ—Ä–µ–∑ hook_init()
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **–ß—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –ù–ï –∑–∞–º–µ–Ω—è–µ—Ç:**
- ‚ùå Firewall (iptables/ufw)
- ‚ùå DDoS –∑–∞—â–∏—Ç—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞  
- ‚ùå SSL/TLS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- ‚ùå –ê–Ω—Ç–∏–≤–∏—Ä—É—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚ùå Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—é

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ secretKey
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Redis –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏
- –î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫

## üìã –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### **–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–∞–π—Ç–æ–≤:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
2. –°–º–µ–Ω–∏—Ç–µ secretKey –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π
3. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ 1-2 –Ω–µ–¥–µ–ª–∏
4. –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### **–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏!**

–ö—Ä–æ–Ω-–∑–∞–¥–∞—á–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ Redis
0 3 * * * cd /home/user/site/bot_protection && php cleanup.php --force >> /var/log/bot-cleanup.log 2>&1

**–í–µ—Ä—Å–∏—è:** v2.0  
**–°—Ç–∞—Ç—É—Å:** –°—Ç–∞–±–∏–ª—å–Ω–∞—è  
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** PHP 7.4+ / Redis 4.0+  
**–õ–∏—Ü–µ–Ω–∑–∏—è:** –ü—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω–∞—è  
**–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** –ß–µ—Ä–µ–∑ –ª–æ–≥–∏ –∏ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
